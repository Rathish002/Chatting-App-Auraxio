{"version":3,"file":"index.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../shared/dist/index.js","../src/setup/utils/script-loaders.ts","../src/setup/utils/find-entry-file.ts","../src/setup/utils/extract-package-json-options.ts","../src/setup/utils/handle-build-warnings.ts","../src/plugins/proxy-hooks/resolver.ts","../src/plugins/proxy-hooks/loader.ts","../src/exceptions/TransformationException.ts","../src/exceptions/TranspilerNotFoundException.ts","../src/plugins/utils/normalize-plugin.ts","../src/plugins/utils/validate-plugin.ts","../src/plugins/utils/external-resolver.ts","../src/plugins/utils/fetch-npm-dependency.ts","../src/plugins/utils/worker-queue.ts","../src/plugins/utils/transpiler-creator.ts","../src/plugins/proxy-hooks/transform.ts","../src/plugins/proxy-hooks/beforeBundle.ts","../src/plugins/plugin-manager.ts","../src/setup/intro.ts","../src/setup/index.ts","../src/plugins/plugin-creator.ts","../src/plugins/base-plugins/base-loader-plugin.ts","../src/plugins/base-plugins/base-resolver-plugin.ts","../src/plugins/plugin-factory.ts","../src/Packager.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/*\n    @license\n\n    Packager Shared libs v0.1.9\n    @author baryla (Adrian Barylski)\n    @github https://github.com/baryla/packager\n\n    Released under the MIT License.\n*/\nvar __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var isObject=function(e){return e&&\"object\"==typeof e&&e.constructor===Object},cacheFactory=function(){var e=new Map;return{get:function(t){return e.get(t)},getAll:function(){return Array.from(e.entries()).reduce((function(e,t){var n;return __assign(__assign({},e),((n={})[t[0]]=t[1]||null,n))}),{})},set:function(t,n){return null!=t&&\"\"!=t&&(e.set(t,n),this.has(t))},has:function(e){return Boolean(this.get(e))},update:function(e,t){var n=this.get(e);if(n)return isObject(t)?(this.set(e,__assign(__assign({},n),t)),this.has(e)):(this.set(e,t),this.has(e))},delete:function(t){return e.delete(t)},clear:function(){e.clear()}}},isModuleExternal=function(e){return!e.startsWith(\".\")&&!e.startsWith(\"/\")},normalizeBundleOptions=function(e){return{dependencies:convertKeysToLowercase(e.dependencies)}},convertKeysToLowercase=function(e){return e?Object.keys(e||{}).reduce((function(t,n){var r;return __assign(__assign({},t),((r={})[n.toLowerCase()]=e[n],r))}),{}):{}},parsePackagePath=function(e){var t,n;if(!e||\"\"==e)return{name:null,version:null,path:null};var r=e.startsWith(\"@\")?null===(t=/^(@[^/]+\\/[^/@]+)(?:([\\s\\S]+))?/.exec(e))||void 0===t?void 0:t.slice(1):null===(n=/^([^/@]+)(?:([\\s\\S]+))?/.exec(e))||void 0===n?void 0:n.slice(1);if(null==r?void 0:r.length){var a=extractRest(r[1]||null);return __assign({name:r[0]||null},a)}return{name:null,version:null,path:null}},extractRest=function(e){if(!e||\"\"==e)return{version:null,path:null};if(e.startsWith(\"@\")){var t=/@(.*?)\\/(.*)/.exec(e);return t?{version:t[1]||null,path:t[2]||null}:{version:e.substring(1)||null,path:null}}if(e&&~e.indexOf(\"@\")){var n=e.split(\"@\");return{version:n[1],path:0===n[0].indexOf(\"/\")?n[0].substring(1):n[0]}}return{version:null,path:e&&e.startsWith(\"/\")?e.slice(1):null}},absolutePath=/^(?:\\/|(?:[A-Za-z]:)?[\\\\|\\/])/,relativePath=/^\\.?\\.\\//;function isAbsolute(e){return absolutePath.test(e)}function isRelative(e){return relativePath.test(e)}function basename(e){return e.split(/(\\/|\\\\)/).pop()}function dirname(e){var t=/(\\/|\\\\)[^\\/\\\\]*$/.exec(e);if(!t)return\".\";var n=e.slice(0,-t[0].length);return n||\"/\"}function extname(e){var t=basename(e);if(!t)return\"\";var n=/\\.[^\\.]+$/.exec(t);return n?n[0]:\"\"}function resolve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift().split(/[\\/\\\\]/);return e.forEach((function(e){if(isAbsolute(e))n=e.split(/[\\/\\\\]/);else{for(var t=e.split(/[\\/\\\\]/);\".\"===t[0]||\"..\"===t[0];){\"..\"===t.shift()&&n.pop()}n.push.apply(n,t)}})),normalize(n.join(\"/\"))}function normalize(e){return e.replace(/\\/\\//gi,\"/\")}var sep=\"/\",path={isAbsolute:isAbsolute,isRelative:isRelative,basename:basename,dirname:dirname,extname:extname,resolve:resolve,normalize:normalize,sep:sep},generateExport=function(e,t){return void 0===t&&(t=!0),(t?\"export default \":\"\")+\"function addStyles () {const tag = document.createElement('style');tag.type = 'text/css';tag.appendChild(document.createTextNode(`\"+e.code+\"`));tag.setAttribute('data-src', '\"+e.path+\"');document.head.appendChild(tag);} addStyles();\"},generateExportsForAllStyles=function(e,t){return generateExport({path:t,code:e.join(\"\\n\\n\")},!1)},stylePluginHelpers={generateExport:generateExport,generateExportsForAllStyles:generateExportsForAllStyles},verifyExtensions=function(e){var t=new RegExp(\"\\\\\"+e.join(\"$|\\\\\")+\"$\",\"i\");return function(e,n){void 0===n&&(n=!0);var r=isModuleExternal(e);return t.test(e)&&!((!r||n)&&r)}},resolveRelative=function(e,t,n,r){if(void 0===r&&(r=!0),!t||\"\"==t)return null;var a=path.resolve(path.dirname(t),e).replace(/^\\.\\//,\"\"),i=n.files.find((function(e){return e.path===a}));if(i)return r?i.path:i;var s=function(e){return n.files.find((function(t){return t.path===e+\"/index.js\"||t.path===e+\"/index.ts\"||t.path===e+\"/index.jsx\"||t.path===e+\"/index.tsx\"||t.path===e+\".js\"||t.path===e+\".ts\"||t.path===e+\".jsx\"||t.path===e+\".tsx\"}))||null}(path.resolve(path.dirname(t),e));return s?r?s.path||null:s||null:null},resolveExternal=function(e,t,n){if(!t.startsWith(\"@\")){if(~t.indexOf(\"/\")){var r=n.dependencies.get(t);if(r){var a=new URL(r.meta.url).pathname;return path.resolve(path.dirname(a),e)}return path.resolve(path.dirname(\"/\"+t),e).replace(/^\\.\\//,\"\")}return path.resolve(\"/\"+t,e)}throw new Error(\"Module \"+e+\" has a parent \"+t+\" with @ which is currently not supported.\")},fetchScript=function(url){return\"function\"==typeof self.importScripts?self.importScripts(url):\"function\"==typeof fetch&&fetch(url).then((function(e){return e.text()})).then((function(text){return eval(text)}))};self.sourceMap||fetchScript(\"https://cdn.jsdelivr.net/npm/source-map/dist/source-map.js\");var generateSourceMap=function(e,t,n){var r=new self.sourceMap.SourceMapGenerator({file:e});return r.setSourceContent(e,t),n.split(/\\r?\\n/g).forEach((function(t,n){t&&r.addMapping({source:e,original:{line:n+1,column:0},generated:{line:n+1,column:0}})})),r.toJSON()};function deepMerge(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r={},a=0,i=t;a<i.length;a++){var s=i[a];if(s instanceof Array)r instanceof Array||(r=[]),r=__spreadArrays(r,s);else if(s instanceof Object)for(var o=0,l=Object.entries(s);o<l.length;o++){var u=l[o],c=u[0],p=u[1];p instanceof Object&&c in r&&(p=deepMerge(r[c],p)),r=__assign(__assign({},r),((e={})[c]=p,e))}}return r}self.generateSourceMap=generateSourceMap;export{cacheFactory,deepMerge,generateSourceMap,isModuleExternal,normalizeBundleOptions,parsePackagePath,path,resolveRelative,resolveExternal as resolveRelativeExternal,stylePluginHelpers,verifyExtensions};\n//# sourceMappingURL=index.js.map\n","export const loadRollup = () =>\n  new Promise(resolve => {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://cdn.jsdelivr.net/npm/rollup@latest/dist/rollup.browser.js\";\n    script.setAttribute(\"data-packager\", \"true\");\n    script.onload = resolve;\n    document.head.appendChild(script);\n  });\n\nexport const loadMagicString = () =>\n  new Promise(resolve => {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://cdn.jsdelivr.net/npm/magic-string@latest/dist/magic-string.umd.min.js\";\n    script.setAttribute(\"data-packager\", \"true\");\n    script.onload = resolve;\n    document.head.appendChild(script);\n  });\n","import { File } from \"../../../types\";\n\nexport default (files: File[], forcePath?: string) => {\n  const pkgMain = files.find(f => f.path === forcePath);\n  const foundFile = pkgMain || files.find(f => f.entry);\n\n  if (!foundFile) {\n    throw Error(\n      \"You haven't specific an entry file. You can do so by adding 'entry: true' to one of your files or use the 'main' in a package.json file..\"\n    );\n  }\n\n  return foundFile;\n};\n","export default (packageJson: any) => {\n  return {\n    dependencies: {\n      ...packageJson.dependencies,\n      ...packageJson.peerDependencies\n    }\n  };\n};\n","export default (warning: any) => {\n  if (warning.code === \"THIS_IS_UNDEFINED\") return;\n};\n","import { PluginAPI, PluginContext } from \"packager/types\";\n\nexport default (plugin: PluginAPI, context: PluginContext) => {\n  const resolverFunction = async (moduleId: string, parentId?: string) => {\n    return moduleId;\n  };\n\n  return new Proxy(resolverFunction, {\n    async apply(target, thisArg, argumentsList) {\n      const handledResolverFunction = await Reflect.apply(\n        target,\n        context,\n        argumentsList\n      );\n\n      if (!handledResolverFunction) {\n        return Promise.resolve();\n      }\n\n      try {\n        return (\n          (await plugin.resolver!.bind(context)(\n            argumentsList[0],\n            argumentsList[1]\n          )) || null\n        );\n      } catch (e) {\n        throw Error(e);\n      }\n    }\n  });\n};\n","import { PluginAPI, PluginContext } from \"packager/types\";\n\nexport default (plugin: PluginAPI, context: PluginContext) => {\n  const loaderFunction = async (moduleId: string) => {\n    return moduleId;\n  };\n\n  return new Proxy(loaderFunction, {\n    async apply(target, thisArg, argumentsList) {\n      const handledLoaderFunction = await Reflect.apply(\n        target,\n        context,\n        argumentsList\n      );\n\n      if (!handledLoaderFunction) {\n        return Promise.resolve();\n      }\n\n      return (await plugin.loader!.bind(context)(argumentsList[0])) || null;\n    }\n  });\n};\n","export default class TransformationException extends Error {\n  constructor(filePath: string, transformerName?: string) {\n    super(\n      `Failed to transform ${filePath}${\n        transformerName ? \" in \" + transformerName : \"\"\n      }.`\n    );\n  }\n}\n","export default class TranspilerNotFoundException extends Error {\n  constructor(pluginName: string) {\n    super(\n      `Transpiler for ${pluginName} plugin doesn't exist. Make sure you have correctly registered it.`\n    );\n  }\n}\n","import { PluginAPI } from \"../../../types\";\n\nexport default (plugin: PluginAPI): PluginAPI => ({\n  // Meta\n  name: plugin.name,\n  transpiler: plugin.transpiler,\n  extensions: plugin.extensions,\n  // Hooks\n  resolver: plugin.resolver,\n  loader: plugin.loader,\n  beforeBundle: plugin.beforeBundle\n});\n","import { PluginAPI } from \"../../../types\";\n\nexport const MISSING_NAME_FIELD = `'name' is a required field on a plugin.`;\nexport const MISSING_FIELD = (pluginName: string, field: string) =>\n  `${pluginName} is missing '${field}'.`;\n\nexport default (plugin: PluginAPI): void | never => {\n  if (!plugin.name) {\n    throw new Error(MISSING_NAME_FIELD);\n  }\n};\n","const resolver = async (\n  path: string,\n  retries = 1,\n  maxRetries = 3\n): Promise<any | never> => {\n  try {\n    const data = await fetch(path).then(async res => ({\n      code: await res.text(),\n      meta: {\n        url: res.url,\n        status: res.status\n      }\n    }));\n\n    return data;\n  } catch ({ response }) {\n    if (response.status === 404) {\n      throw Error(\"Not found.\");\n    }\n\n    if (retries < maxRetries) {\n      return resolver(path, retries + 1);\n    } else {\n      throw Error(\"Error retrieving data.\");\n    }\n  }\n};\n\nexport default resolver;\n","import resolver from \"./external-resolver\";\n\nconst services: { [key: string]: { [key: string]: string } } = {\n  unpkg: {\n    url: \"https://unpkg.com\"\n  },\n  jsdelivr: {\n    url: \"https://cdn.jsdelivr.net/npm\"\n  }\n};\n\nconst getNextService = (currentService: string): string | null => {\n  const serviceNames = Object.keys(services);\n  const currentIndex = serviceNames.indexOf(currentService);\n\n  // If current service is last, return null\n  if (currentIndex >= serviceNames.length - 1) {\n    return null;\n  }\n\n  return serviceNames[currentIndex + 1];\n};\n\ntype FetchedNpmDependency = {\n  code: string;\n  transformedCode?: string;\n  meta: {\n    name: string;\n    status: number;\n    url: string;\n  };\n};\n\nexport default async function fetchNpmDependency(\n  name: string,\n  version: number | string = \"latest\",\n  path: string = \"\",\n  service = \"unpkg\"\n): Promise<FetchedNpmDependency | null> {\n  try {\n    const _service = services[service];\n    const fullPath = `${_service.url}/${name}@${version}${\n      path != \"\" && !path.startsWith(\"/\") ? `/${path}` : path\n    }`;\n    const data = await resolver(fullPath);\n\n    return data;\n  } catch (e) {\n    const nextService = getNextService(service);\n\n    if (nextService) {\n      return fetchNpmDependency(name, version, path, nextService);\n    } else {\n      return null;\n    }\n  }\n}\n","import { WorkerQueue } from \"../../../types\";\n\nlet enqueue: any = queueMicrotask;\nif (typeof enqueue !== \"function\") {\n  enqueue = (callback: any) =>\n    Promise.resolve()\n      .then(callback)\n      .catch(e =>\n        setTimeout(() => {\n          throw e;\n        })\n      );\n}\n\nconst workerQueue = (): WorkerQueue => ({\n  currentTask: null,\n  complete: [],\n  errors: [],\n  queue: [],\n  awaiters: [],\n  async push(cb: any): Promise<void> {\n    this.queue.push(cb);\n\n    enqueue(this.next.bind(this));\n\n    return this.wait();\n  },\n  async next(): Promise<void> {\n    if (!this.currentTask) {\n      const task = this.queue.shift();\n      try {\n        if (task) {\n          this.currentTask = task;\n          const complete = await this.currentTask;\n          this.complete.push(complete);\n          this.currentTask = undefined;\n\n          if (this.queue.length) {\n            enqueue(this.next.bind(this));\n          } else this.callAWaiters();\n        } else {\n          this.callAWaiters();\n        }\n      } catch (e) {\n        this.errors.push(e);\n      }\n    }\n  },\n  callAWaiters() {\n    this.awaiters.splice(0).forEach(awaiter => awaiter());\n  },\n  wait() {\n    if (!this.queue.length) {\n      return Promise.resolve();\n    }\n    return new Promise(resolve => this.awaiters.push(resolve));\n  }\n});\n\nexport default workerQueue;\n","import {\n  PluginTranspiler,\n  TranspilerContext,\n  File,\n  PluginContext\n} from \"../../../types\";\n\nexport const TRANSPILE_STATUS = {\n  PREPARE_FILES: \"TRANSPILER:FILE:PREPARE\",\n  PREPARE_ADDITIONAL: \"TRANSPILER:ADDITIONAL:PREPARE\",\n  ADDITIONAL_TRANSPILED: \"TRANSPILER:ADDITIONAL:TRANSPILED\",\n  TRANSPILE_COMPLETE: \"TRANSPILER:TRANSPILE:COMPLETE\",\n  ERROR_COMPILE: \"TRANSPILER:ERROR:COMPILE\",\n  ERROR_ADDITIONAL: \"TRANSPILER:ERROR:ADDITIONAL\"\n};\n\nconst validateOptions = (options: PluginTranspiler) => {\n  if (!options.worker) {\n    throw new Error(\"Every transpiler requires a worker.\");\n  }\n\n  if (\n    (options.dependencies && !Array.isArray(options.dependencies)) ||\n    (options.dependencies &&\n      Array.isArray(options.dependencies) &&\n      options.dependencies.length === 0)\n  ) {\n    throw new Error(\"'Dependencies' has to be an array with string values.\");\n  }\n};\n\nconst validateContext = (context: PluginContext) => {\n  const transpiler = context.meta.get(\"transpiler\");\n\n  if (\n    !transpiler!.extensions ||\n    (transpiler!.extensions && !Array.isArray(transpiler!.extensions)) ||\n    (transpiler!.extensions &&\n      Array.isArray(transpiler!.extensions) &&\n      !transpiler!.extensions.length)\n  ) {\n    throw new Error(\n      `Plugin ${context.name} has to have extensions when using a transpiler.`\n    );\n  }\n};\n\nexport const createTranspiler = (\n  options: PluginTranspiler,\n  context: PluginContext\n): TranspilerContext => {\n  validateOptions(options);\n  validateContext(context);\n\n  return {\n    context,\n    setContext(context: PluginContext): void {\n      this.context = context;\n    },\n    worker: options.worker(),\n    extensions: context.meta.get(\"transpiler\").extensions,\n    transpile(file: File) {\n      return new Promise((resolve, reject) => {\n        this.worker.onmessage = async ({ data }) => {\n          const { file, type, error, additional } = data;\n\n          if (\n            type === TRANSPILE_STATUS.ERROR_ADDITIONAL ||\n            type === TRANSPILE_STATUS.ERROR_COMPILE\n          ) {\n            return reject(error);\n          }\n\n          if (type === TRANSPILE_STATUS.PREPARE_ADDITIONAL) {\n            try {\n              const additionalTranspiled = await this.transpileAdditional(\n                additional\n              );\n\n              this.worker.postMessage({\n                type: TRANSPILE_STATUS.ADDITIONAL_TRANSPILED,\n                file,\n                additional: additionalTranspiled,\n                context: {\n                  files: this.context.packagerContext.files\n                }\n              });\n            } catch (error) {\n              return reject(error);\n            }\n          }\n\n          if (type === TRANSPILE_STATUS.TRANSPILE_COMPLETE) {\n            return resolve(file);\n          }\n        };\n\n        this.worker.postMessage({\n          type: TRANSPILE_STATUS.PREPARE_FILES,\n          file,\n          context: {\n            files: this.context.packagerContext.files\n          }\n        });\n      });\n    },\n    async transpileAdditional({\n      styles,\n      html\n    }: {\n      styles: any[];\n      html: any[];\n    }) {\n      const completedStyles: any = [];\n      for (const style of styles) {\n        const { code, path, name, extension } = style;\n        if (!extension || extension === \"\") {\n          console.error(\n            `Could not recognise which file type or language to load for ${path}`\n          );\n          throw new Error(\n            `Could not recognise which file type or language to load for ${path}`\n          );\n        }\n\n        const transpiler = this.getDependencyTranspiler(extension);\n        if (transpiler) {\n          completedStyles.push(transpiler.transpile({ name, code, path }));\n        }\n      }\n\n      return {\n        styles: await Promise.all(completedStyles)\n      };\n    },\n    getDependencyTranspiler(extension: string): TranspilerContext | null {\n      extension = extension.startsWith(\".\") ? extension : `.${extension}`;\n\n      const transpilers: TranspilerContext[] = Object.values(\n        this.context.packagerContext.transpilers.getAll()\n      );\n      let transpiler = transpilers.find(t => t.extensions.includes(extension));\n\n      /**\n       * If we have already used this transpiler somewhere else,\n       * we can use it here too.\n       */\n      if (transpiler) {\n        let pluginContext = {\n          ...transpiler.context,\n          packagerContext: this.context.packagerContext\n        };\n\n        transpiler.setContext(pluginContext);\n        return transpiler;\n      }\n\n      const foundPlugin = this.context.packagerContext.plugins.find(p => {\n        const transpiler = p.meta.get(\"transpiler\");\n        if (transpiler) {\n          return transpiler.extensions.includes(extension);\n        }\n        return false;\n      });\n\n      /**\n       * Checking whether any of the registered plugins actually\n       * support this extension.\n       */\n      if (foundPlugin && foundPlugin.rawPlugin.transpiler) {\n        let pluginContext: PluginContext = {\n          ...foundPlugin,\n          packagerContext: this.context.packagerContext\n        };\n        transpiler = createTranspiler(\n          foundPlugin.rawPlugin.transpiler,\n          pluginContext\n        );\n\n        this.context.packagerContext.transpilers.set(\n          `${foundPlugin.name}-transpiler`,\n          transpiler\n        );\n        pluginContext.packagerContext = this.context.packagerContext;\n        transpiler.setContext(pluginContext);\n\n        return transpiler;\n      }\n\n      console.error(\n        `Extension ${extension} is not supported. Please register a plugin that supports it.`\n      );\n\n      throw new Error(\n        `Extension ${extension} is not supported. Please register a plugin that supports it.`\n      );\n    }\n  };\n};\n\nexport default createTranspiler;\n","import { verifyExtensions } from \"packager-shared\";\nimport { TransformationException } from \"../../exceptions\";\nimport { PluginAPI, PluginContext, TranspilerContext } from \"../../../types\";\nimport { createTranspiler } from \"../utils\";\n\nexport default (plugin: PluginAPI, context: PluginContext) => {\n  const transpilerName = `${plugin.name}-transpiler`;\n  const transformFunction = async (code: string, moduleId: string) => {\n    if (!plugin.transpiler) return null;\n\n    let transpiler: TranspilerContext = context.packagerContext.transpilers.get(\n      transpilerName\n    );\n\n    if (!transpiler) {\n      transpiler = createTranspiler(plugin.transpiler, context);\n    } else {\n      transpiler.setContext(context);\n    }\n\n    context.packagerContext.transpilers.set(transpilerName, transpiler);\n\n    if (!verifyExtensions(transpiler.extensions)(moduleId)) {\n      return null;\n    }\n\n    const file = context.packagerContext.files.find(f => f.path === moduleId)!;\n    await context.packagerContext.workerQueue.push(\n      transpiler.transpile({ ...file, code })\n    );\n\n    const completed = context.packagerContext.workerQueue.complete.find(\n      c => c.path === moduleId\n    );\n\n    if (completed) {\n      return {\n        code: completed.code,\n        map: completed.map || { mappings: \"\" },\n        moduleId\n      };\n    }\n\n    throw new TransformationException(moduleId, transpilerName);\n  };\n\n  return new Proxy(transformFunction, {\n    async apply(target, thisArg, argumentsList) {\n      context.packagerContext = {\n        ...context.packagerContext,\n        acornParser: thisArg.parse\n      };\n      const handledTransformFunction = await Reflect.apply(\n        target,\n        context,\n        argumentsList\n      );\n\n      if (!handledTransformFunction) {\n        return Promise.resolve();\n      }\n\n      if (!plugin.beforeBundle) {\n        return handledTransformFunction;\n      }\n\n      const { code, map, moduleId } = handledTransformFunction;\n\n      return {\n        code: plugin.beforeBundle.bind(context)(code, moduleId) || code,\n        map\n      };\n    }\n  });\n};\n","import { PluginAPI, PluginContext } from \"../../../types\";\n\nexport default (plugin: PluginAPI, context: PluginContext) => {\n  const checkIfFileIsAlreadyTranspiled = (path: string) =>\n    context.packagerContext.workerQueue.complete.find(f => f.path === path);\n\n  const beforeBundleFunction = async (code: string, moduleId: string) => {\n    const file = checkIfFileIsAlreadyTranspiled(moduleId);\n\n    if (file) {\n      return {\n        code: file.code,\n        map: file.map || { mappings: \"\" },\n        moduleId\n      };\n    }\n\n    return { code, map: { mappings: \"\" }, moduleId };\n  };\n\n  return new Proxy(beforeBundleFunction, {\n    async apply(target, thisArg, argumentsList) {\n      context.packagerContext = {\n        ...context.packagerContext,\n        acornParser: thisArg.parse\n      };\n      const handledTransformFunction = await Reflect.apply(\n        target,\n        context,\n        argumentsList\n      );\n\n      if (!handledTransformFunction) {\n        return Promise.resolve();\n      }\n\n      const { code, map, moduleId } = handledTransformFunction;\n\n      return {\n        code:\n          (await plugin.beforeBundle!.bind(context)(code, moduleId)) || code,\n        map\n      };\n    }\n  });\n};\n","import {\n  PackagerContext,\n  PluginManagerPlugin,\n  PluginAPI,\n  PluginManager,\n  PluginAPIasRollupPlugin,\n  PluginContext\n} from \"../../types\";\nimport { Plugin } from \"rollup\";\nimport {\n  resolver as resolverProxyHook,\n  loader as loaderProxyHook,\n  transform as transformProxyHook,\n  beforeBundle as beforeBundleProxyHook\n} from \"./proxy-hooks\";\n\nimport { validatePlugin, normalizePlugin, createTranspiler } from \"./utils\";\n\nconst pluginRegistry = new Map();\nconst rawPluginRegistry = new Map();\n\nconst transformPluginAsProxy = (\n  plugin: PluginAPI,\n  context: PackagerContext\n): PluginAPIasRollupPlugin => {\n  let propertiesAndHooks: Plugin = {\n    name: plugin.name\n  };\n\n  const pluginMeta = new Map();\n  if (plugin.transpiler) {\n    pluginMeta.set(\"transpiler\", {\n      name: `${plugin.name}-transpiler`,\n      extensions: plugin.extensions || []\n    });\n  }\n\n  let pluginContext: PluginContext = {\n    name: plugin.name,\n    packagerContext: context,\n    rawPlugin: plugin,\n    meta: pluginMeta\n  };\n\n  const pluginIndex = context.plugins.findIndex(p => p.name === plugin.name);\n\n  pluginContext.packagerContext = context;\n\n  if (!!~pluginIndex) {\n    context.plugins[pluginIndex] = pluginContext;\n  } else {\n    context.plugins.push(pluginContext);\n  }\n\n  if (plugin.resolver) {\n    propertiesAndHooks = {\n      ...propertiesAndHooks,\n      resolveId: resolverProxyHook(plugin, pluginContext)\n    };\n  }\n\n  if (plugin.loader) {\n    propertiesAndHooks = {\n      ...propertiesAndHooks,\n      load: loaderProxyHook(plugin, pluginContext)\n    };\n  }\n\n  if (pluginContext.meta.has(\"transpiler\")) {\n    propertiesAndHooks = {\n      ...propertiesAndHooks,\n      transform: transformProxyHook(plugin, pluginContext)\n    };\n  }\n\n  if (!pluginContext.meta.has(\"transpiler\") && plugin.beforeBundle) {\n    propertiesAndHooks = {\n      ...propertiesAndHooks,\n      transform: beforeBundleProxyHook(plugin, pluginContext)\n    };\n  }\n\n  return propertiesAndHooks;\n};\n\nexport const createPluginManager = (): PluginManager => ({\n  packagerContext: <PackagerContext>{},\n  setPackagerContext(context: PackagerContext): void {\n    this.packagerContext = context;\n  },\n  registerPlugin(plugin: PluginAPI): void {\n    validatePlugin(plugin);\n\n    pluginRegistry.set(plugin.name || null, {\n      ...normalizePlugin(plugin),\n      transformed: false\n    });\n\n    rawPluginRegistry.set(plugin.name || null, normalizePlugin(plugin));\n  },\n  prepareAndGetPlugins() {\n    return this.getRegisteredPlugins().map((plugin: PluginManagerPlugin) => {\n      if (plugin.transformed) {\n        const rawPlugin = rawPluginRegistry.get(plugin.name);\n        if (rawPlugin) {\n          return {\n            ...transformPluginAsProxy(rawPlugin, this.packagerContext),\n            transformed: true\n          };\n        }\n\n        throw Error(`Plugin ${plugin.name} has been registered incorrectly.`);\n      }\n\n      const transformedPlugin = transformPluginAsProxy(\n        plugin,\n        this.packagerContext\n      );\n\n      pluginRegistry.set(plugin.name, {\n        ...transformedPlugin,\n        transformed: true\n      });\n\n      return { ...transformedPlugin, transformed: true };\n    });\n  },\n  getRegisteredPlugins(): PluginManagerPlugin[] {\n    return Array.from(pluginRegistry.entries()).map((p: any) => ({\n      ...p[1]\n    }));\n  }\n});\n","import { PackagerContext, Setup } from \"../../types\";\n\nexport const applyPreCode = () =>\n  `window.__dependencies = { ...window.__dependencies || {} };`;\n\nexport default function(context: PackagerContext): Setup {\n  return {\n    name: \"packager::setup::intro\",\n    intro: () => applyPreCode()\n  };\n}\n","import { PackagerContext } from \"../../types\";\nimport intro from \"./intro\";\n\nexport default (context: PackagerContext) => [intro(context)];\n","import { PluginAPI } from \"../../types\";\n\nexport const createPlugin = (args: PluginAPI): PluginAPI => args;\n","import { parsePackagePath } from \"packager-shared\";\n\nimport { createPlugin } from \"../plugin-creator\";\nimport { fetchNpmDependency } from \"../utils\";\n\nconst cleanupExternalDependency = (code: string): string =>\n  code.replace(/process.env.NODE_ENV/g, \"'development'\");\n\nconst baseLoaderPlugin = createPlugin({\n  name: \"base-loader\",\n  async loader(moduleId: string) {\n    const file = this.packagerContext.files.find(f => f.path === moduleId);\n\n    if (moduleId && !file) {\n      const moduleMeta = parsePackagePath(moduleId);\n      const moduleName = moduleMeta.name?.split(\"__\")[0];\n      if (!moduleName)\n        throw new Error(\"There was an issue with loading deps for \" + moduleId);\n\n      const version =\n        moduleMeta.version ||\n        this.packagerContext.bundleOptions.dependencies[moduleName] ||\n        \"latest\";\n\n      const cachedNpmDependency = this.packagerContext.dependencies.get(\n        moduleId\n      );\n\n      if (!cachedNpmDependency) {\n        const npmDependency =\n          (await fetchNpmDependency(\n            moduleName,\n            version,\n            moduleMeta.path || \"\"\n          )) || \"\";\n\n        if (npmDependency) {\n          const cleanUpCode = cleanupExternalDependency(npmDependency.code);\n\n          this.packagerContext.dependencies.set(moduleId, {\n            ...npmDependency,\n            code: cleanUpCode,\n            name: moduleId\n          });\n\n          return {\n            code: cleanUpCode\n          };\n        }\n\n        return null;\n      }\n\n      return {\n        code: \"\"\n      };\n    } else if (moduleId && file) {\n      return {\n        code: file.code\n      };\n    }\n\n    return null;\n  }\n});\n\nexport default baseLoaderPlugin;\n","import {\n  isModuleExternal,\n  resolveRelativeExternal,\n  resolveRelative\n} from \"packager-shared\";\n\nimport { createPlugin } from \"../plugin-creator\";\n\nconst baseResolverPlugin = createPlugin({\n  name: \"base-resolver\",\n  resolver(moduleId: string, parentId?: string) {\n    if (!parentId) return moduleId;\n\n    if (isModuleExternal(moduleId)) return moduleId;\n\n    const relativePath = <string | null>(\n      resolveRelative(moduleId, parentId, this.packagerContext)\n    );\n\n    if (relativePath) return relativePath;\n\n    if (isModuleExternal(parentId)) {\n      const pkgPath = resolveRelativeExternal(\n        moduleId,\n        parentId,\n        this.packagerContext\n      );\n\n      if (pkgPath) {\n        return {\n          id: pkgPath.substr(1)\n        };\n      }\n\n      return null;\n    }\n\n    throw new Error(`Could not resolve '${moduleId}' from '${parentId}'`);\n  }\n});\n\nexport default baseResolverPlugin;\n","import { cacheFactory, normalizeBundleOptions } from \"packager-shared\";\n\nimport setup from \"../setup\";\nimport { workerQueue } from \"./utils\";\nimport { baseResolver, baseLoader } from \"./base-plugins\";\n\nimport {\n  BundleOptions,\n  PackagerContext,\n  File,\n  PluginManager,\n  PluginContext\n} from \"../../types\";\n\nconst defaultBundleOptions: BundleOptions = {\n  dependencies: {}\n};\n\nconst cache = {\n  dependencies: cacheFactory(),\n  transpilers: cacheFactory(),\n  esModulesWithoutDefaultExport: new Set(),\n  esModulesWithDefaultExport: new Set()\n};\n\nconst plugins: PluginContext[] = [];\n\nexport function createPluginFactory(\n  files: File[],\n  bundleOptions: BundleOptions = defaultBundleOptions,\n  pluginManager: PluginManager\n) {\n  const context: PackagerContext = {\n    ...cache,\n    files,\n    plugins,\n    workerQueue: workerQueue(),\n    bundleOptions: normalizeBundleOptions(bundleOptions)\n  };\n\n  pluginManager.setPackagerContext(context);\n  pluginManager.registerPlugin(baseResolver);\n  pluginManager.registerPlugin(baseLoader);\n\n  const registeredPlugins = pluginManager.prepareAndGetPlugins();\n\n  return [...setup(context), ...registeredPlugins];\n}\n","import { InputOptions, OutputOptions, RollupCache } from \"rollup\";\nimport { deepMerge } from \"packager-shared\";\n\nimport {\n  PackagerConstructor,\n  PackagerOptions,\n  BundleOptions,\n  File,\n  PluginAPI\n} from \"../types\";\nimport {\n  loadRollup,\n  loadMagicString,\n  findEntryFile,\n  extractPackageJsonOptions,\n  handleBuildWarnings\n} from \"./setup/utils\";\n\nimport { createPluginManager } from \"./plugins/plugin-manager\";\nimport { createPluginFactory } from \"./plugins/plugin-factory\";\n\nconst pluginManager = createPluginManager();\n\nexport default class Packager implements PackagerConstructor {\n  public rollup: any;\n  public files = <File[]>[];\n  public packagerOptions = <PackagerOptions>{\n    cache: true,\n    sourcemaps: false\n  };\n  public bundleOptions = <BundleOptions>{\n    dependencies: {}\n  };\n  public inputOptions: InputOptions;\n  public outputOptions: OutputOptions;\n  public cachedBundle = <RollupCache>{ modules: [] };\n\n  constructor(\n    options: PackagerOptions,\n    inputOptions: InputOptions = {},\n    outputOptions: OutputOptions = {}\n  ) {\n    this.packagerOptions = { ...this.packagerOptions, ...options };\n    this.inputOptions = {\n      ...inputOptions,\n      inlineDynamicImports: true,\n      cache: this.packagerOptions.cache && this.cachedBundle\n    };\n\n    this.outputOptions = {\n      ...outputOptions,\n      format: \"iife\",\n      sourcemap: this.packagerOptions.sourcemaps ? \"inline\" : false,\n      freeze: false\n    };\n  }\n\n  registerPlugin(plugin: PluginAPI) {\n    pluginManager.registerPlugin(plugin);\n  }\n\n  async bundle(files: File[], bundleOptions: BundleOptions) {\n    this.files = files;\n    this.bundleOptions = { ...this.bundleOptions, ...bundleOptions };\n\n    try {\n      if (!this.rollup || !window.rollup) {\n        await loadRollup();\n        await loadMagicString();\n        this.rollup = window.rollup;\n      }\n\n      let entryFile;\n      const packageJson = this.files.find(f => f.path === \"/package.json\");\n\n      if (packageJson && packageJson.code != \"\") {\n        const parsed =\n          typeof packageJson.code === \"string\"\n            ? JSON.parse(packageJson.code)\n            : packageJson.code;\n\n        const pkgBundleOptions = extractPackageJsonOptions(parsed);\n        this.bundleOptions = deepMerge(\n          pkgBundleOptions,\n          this.bundleOptions || {}\n        ) as BundleOptions;\n\n        if (parsed.main) {\n          entryFile = findEntryFile(\n            this.files,\n            parsed.main.startsWith(\"/\") ? parsed.main : `/${parsed.main}`\n          );\n        }\n      }\n\n      entryFile = entryFile || findEntryFile(this.files);\n\n      this.inputOptions = {\n        ...this.inputOptions,\n        input: entryFile?.path,\n        onwarn: handleBuildWarnings,\n        plugins: createPluginFactory(\n          this.files,\n          this.bundleOptions,\n          pluginManager\n        )\n      };\n\n      const bundle = await this.rollup.rollup(this.inputOptions);\n\n      this.cachedBundle = this.packagerOptions.cache && bundle.cache;\n\n      const { output } = await bundle.generate(this.outputOptions);\n\n      return {\n        code: `${output[0].code} ${\n          this.outputOptions.sourcemap && output[0].map\n            ? ` \\n //# sourceMappingURL=${output[0].map.toUrl()}`\n            : \"\"\n        }`\n      };\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__spreadArrays","il","r","k","a","j","jl","o","isObject","cacheFactory","Map","get","getAll","from","entries","reduce","set","has","Boolean","update","delete","clear","isModuleExternal","startsWith","normalizeBundleOptions","dependencies","convertKeysToLowercase","keys","toLowerCase","parsePackagePath","name","version","path","exec","slice","extractRest","substring","indexOf","split","absolutePath","relativePath","isAbsolute","test","isRelative","basename","dirname","extname","shift","forEach","normalize","join","replace","sep","verifyExtensions","RegExp","resolveRelative","files","find","resolveExternal","URL","meta","url","pathname","Error","fetchScript","self","importScripts","fetch","text","eval","sourceMap","generateSourceMap","SourceMapGenerator","file","setSourceContent","addMapping","source","original","line","column","generated","toJSON","deepMerge","l","u","c","loadRollup","script","document","createElement","src","setAttribute","onload","head","appendChild","loadMagicString","forcePath","foundFile","entry","packageJson","peerDependencies","warning","code","plugin","context","Proxy","moduleId","parentId","target","argumentsList","Reflect","_a","resolver","bind","e_1","loader","filePath","transformerName","_super","pluginName","transpiler","extensions","beforeBundle","MISSING_NAME_FIELD","retries","maxRetries","res","_b","status","services","unpkg","jsdelivr","getNextService","currentService","serviceNames","currentIndex","fetchNpmDependency","service","_service","fullPath","nextService","enqueue","queueMicrotask","callback","catch","setTimeout","workerQueue","currentTask","complete","errors","queue","awaiters","cb","wait","task","undefined","callAWaiters","splice","awaiter","_this","TRANSPILE_STATUS","PREPARE_FILES","PREPARE_ADDITIONAL","ADDITIONAL_TRANSPILED","TRANSPILE_COMPLETE","ERROR_COMPILE","ERROR_ADDITIONAL","validateOptions","options","worker","isArray","validateContext","createTranspiler","setContext","transpile","onmessage","data","type","error","additional","transpileAdditional","additionalTranspiled","postMessage","packagerContext","error_1","styles","completedStyles","styles_1","_i","style","extension","console","getDependencyTranspiler","all","_c","values","transpilers","includes","pluginContext","foundPlugin","plugins","rawPlugin","transpilerName","completed","map","mappings","TransformationException","acornParser","parse","handledTransformFunction","checkIfFileIsAlreadyTranspiled","pluginRegistry","rawPluginRegistry","transformPluginAsProxy","propertiesAndHooks","pluginMeta","pluginIndex","findIndex","resolveId","resolverProxyHook","load","loaderProxyHook","transform","transformProxyHook","beforeBundleProxyHook","createPluginManager","setPackagerContext","registerPlugin","validatePlugin","normalizePlugin","transformed","prepareAndGetPlugins","getRegisteredPlugins","transformedPlugin","applyPreCode","intro","createPlugin","args","cleanupExternalDependency","baseLoaderPlugin","moduleMeta","moduleName","bundleOptions","npmDependency","cleanUpCode","baseResolverPlugin","pkgPath","resolveRelativeExternal","id","substr","defaultBundleOptions","cache","esModulesWithoutDefaultExport","Set","esModulesWithDefaultExport","createPluginFactory","pluginManager","baseResolver","baseLoader","registeredPlugins","setup","inputOptions","outputOptions","sourcemaps","modules","packagerOptions","inlineDynamicImports","cachedBundle","format","sourcemap","freeze","Packager","rollup","window","entryFile","parsed","JSON","pkgBundleOptions","extractPackageJsonOptions","main","findEntryFile","input","onwarn","handleBuildWarnings","bundle","generate","output","toUrl"],"mappings":"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"}